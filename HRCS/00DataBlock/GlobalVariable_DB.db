DATA_BLOCK "GlobalVariable_DB"
TITLE = 全局变量数据块
{ S7_Optimized_Access := 'FALSE' }
AUTHOR : 樊江涛
VERSION : 0.1
//
//功能说明：
//1. 本数据块用于存储系统全局变量
//2. 包含系统安全联锁、复位等关键控制信号
//3. 供其他功能块调用和访问
   STRUCT 
      xSys_SafetyInterlock : Bool;   // 系统安全联锁和紧急停止信号，用于紧急情况下强制停止所有设备，同时作为系统安全联锁和紧急停止功能
      xSys_Reset : Bool;   // 系统复位信号，用于清除系统故障和报警
      xSys_M_A : Bool;   // 系统手自动模式切换信号，TRUE=自动模式，FALSE=手动模式
      xSys_RemoteMode : Bool;   // 系统远程/本地模式切换信号，TRUE=远程模式，FALSE=本地模式
      xSys_RemoteStartCmd : Bool;   // 远程启停命令，TRUE=启动，FALSE=停止
      xSys_LocalStart : Bool;   // 本地启动按钮
      xSys_LocalStop : Bool;   // 本地停止按钮
      xSys_Fault : Bool;   // 系统故障信号
      xSys_Warning : Bool;   // 系统预警信号
      xSys_Running : Bool;
      xSystemState : Int;
      xFaultCode : Int;
      xSys_RunTime : Time;   // 系统运行时间（掉电保持）
      xSys_StartCount : DInt;   // 系统启动次数（掉电保持）
   END_STRUCT;


BEGIN
   xSys_SafetyInterlock := FALSE;
   xSys_Reset := FALSE;
   xSys_M_A := FALSE;
   xSys_RemoteMode := FALSE;
   xSys_RemoteStartCmd := FALSE;
   xSys_LocalStart := FALSE;
   xSys_LocalStop := FALSE;
   xSys_Fault := FALSE;
   xSys_Warning := FALSE;
   xSys_Running := FALSE;
   xSystemState := 0;
   xFaultCode := 0;
   xSys_RunTime := T#0MS;
   xSys_StartCount := 0;

END_DATA_BLOCK

